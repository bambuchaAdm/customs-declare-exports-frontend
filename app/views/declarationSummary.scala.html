@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.FrontendAppConfig
@import uk.gov.hmrc.play.views.html._
@import controllers.routes._
@import models.Mode
@import forms.DeclarationSummary

@(appConfig: FrontendAppConfig, summary: DeclarationSummary, mode: Mode)(implicit request: Request[_], messages: Messages)

@main_template(
    title = messages("declarationSummary.title"),
    appConfig = appConfig,
    bodyClasses = None) {

    <style>
        .block-summary {
            padding: 10px 0 !important;
            margin-bottom: 1em;
            clear: both;
            background-colot: #fff;
            border-bottom: 1px solid #bfc1c3;
        }

        .inline {
            display: inline;
        }

        div span a {
            border: none;
            margin: 0;
            padding: 0;
        }

        .arrow-side .arrow-down {
            margin-left: 0;
            width: 25px;
            display: inline-block;
            color: #005ea5;
            cursor: pointer;
        }

        .summary {
            display: inline-block;
            color: #005ea5;
            cursor: pointer;
            position: relative;
            margin-bottom: 0.26316em;
            text-decoration: underline;
        }

        .heading-small {
            font-size: 16px;
            line-height: 1.31579;
            font-family: "nta", Arial, sans-serif;
            font-weight: 700;
            text-transform: none;
        }

        .float_right {
            float: right;
        }

        .status {
            width: 18%;
        }

        .status span {
            border-width: 1px;
            border-style: solid;
            border-radius: 3px;
            display: block;
            font-size: 0.7em;
            font-weight: 700;
            padding: 1px 1px 1px 1px;
            text-align: center;
            width: 75px;
        }

        .complete {
            border-color: green;
            color: green;
            margin-right: 62px !important;
            margin-left: 0;
            margin-top: 15px;
        }

        .not-started {
            border-color: #6f777b;
            color: #6f777b;
            background-color: white;
            text-decoration: none;
            cursor: default !important;
            pointer-events: none;
            margin-right: 20px !important;
        }

        .block-summary__edit-link {
            display: inline-block;
            width: 10%;
            text-align: right;
        }


    </style>

    <script type="text/javascript">
        function showConsolidation() {
            var consignmentAnswers = document.getElementById('consignment-answers')
            var isHidden = consignmentAnswers.getAttribute("class")

            if (isHidden == "js-hidden") {
                document.getElementById('consignment-answers').setAttribute("class", "")
                document.getElementById('arrow-right').setAttribute("class", "js-hidden")
                document.getElementById('arrow-down').setAttribute("class", "arrow-down")
            } else {
                document.getElementById('consignment-answers').setAttribute("class", "js-hidden")
                document.getElementById('arrow-right').setAttribute("class", "arrow-side")
                document.getElementById('arrow-down').setAttribute("class", "js-hidden")
            }
        }

    </script>

    @helpers.form(action = DashboardController.onPageLoad(), 'autoComplete -> "off") {
        @components.back_link()

        @components.heading("declarationSummary.heading")

        <div>
            <section class="block-summary">
                @summary_list()
                <span class="inline">
                    <span class="arrow-side" id="arrow-right">
                        ►
                    </span>
                    <span class="arrow-down js-hidden" id="arrow-down">
                        ▼
                    </span>
                </span>
                    <span class="summary heading-small" onClick={showConsolidation()}>
                    <span id="link">Consignment</span>
                </span>
                <div class="inline float_right">
                    <div class="status"><span class="complete">Done</span></div>
                </div>

                <div class="js-hidden" id="consignment-answers">
                    @consignment_summary(summary.consignmentAnswers)
                </div>

                <hr>

                <span class="inline">
                    <span class="arrow-side">►</span><span class="arrow-down" style="display: none;">▼</span>
                </span>
                <span class="summary heading-small" style="margin-top: 0">
                    <span id="link">Items</span>
                </span>
                <div class="inline float_right">
                    <a class="block-summary__edit-link edit_balance_sheet" href="#">
                        Start
                    </a>
                </div>
                <div class="inline float_right">
                    <div class="status"><span class="not-started">Not started</span></div>
                </div>

                <hr>

                <span class="inline">
                    <span class="arrow-side">►</span><span class="arrow-down" style="display: none;">▼</span>
                </span>
                <span class="summary heading-small" style="margin-top: 0">
                    <span id="link">Package</span>
                </span>
                <div class="inline float_right">
                    <a class="block-summary__edit-link edit_balance_sheet" href="#">
                        Start
                    </a>
                </div>
                <div class="inline float_right">
                    <div class="status"><span class="not-started">Not started</span></div>
                </div>

                <hr>

                <span class="inline">
                    <span class="arrow-side">►</span><span class="arrow-down" style="display: none;">▼</span>
                </span>
                <span class="summary heading-small" style="margin-top: 0">
                    <span id="link">Transport</span>
                </span>
                <div class="inline float_right">
                    <a class="block-summary__edit-link edit_balance_sheet" href="#">
                        Start
                    </a>
                </div>
                <div class="inline float_right">
                    <div class="status"><span class="not-started">Not started</span></div>
                </div>
            </section>

        </div>

        <div class="section">
            <button id="submit" class="button">@messages("declarationSummary.submit")</button>
        </div>
    }
}
